# ç¬¬äºŒæ¬¡ä½œä¸š

è¦æ±‚ï¼šæŒ‰ç…§è®¾è®¡å®Œæˆé¡µé¢

## åŸå‹è®¾è®¡

åˆ—è¡¨é¡µï¼šç­›é€‰åŒºã€å¯¼èˆªæ ã€å±•ç¤ºåŒºï¼ˆæ’åº + ç®€ç•¥å›¾ + åˆ†é¡µï¼‰
è¯¦ç»†é¡µï¼šå¯¼èˆªæ ã€ä¸»å›¾è½®æ’­åŒºã€ä¿¡æ¯ä¸è§„åˆ™é€‰æ‹©åŒºã€æ¨èåŒº

## åˆ—è¡¨é¡µä¸šåŠ¡é€»è¾‘åˆ†æï¼ˆæ•°æ®æµå‘ï¼‰

1. ç”¨æˆ·ç‚¹å‡»ç­›é€‰
2. ç­›é€‰æ¡ä»¶æ›´æ”¹åï¼Œè§¦å‘å›è°ƒ
3. å›è°ƒå½±å“ç‰©å“å±•ç¤ºéƒ¨åˆ†ï¼Œæ‰€ä»¥ç­›é€‰æ¡ä»¶åº”è¯¥é€‰æ‹© Propsï¼ˆç”±é¡µé¢ä¼ é€’ï¼‰
4. è€Œå±•ç¤ºåŒºï¼Œå¯ä»¥åˆ†ä¸ºæ’åºã€ç®€ç•¥å›¾ã€åˆ†é¡µ
5. ç‚¹å‡»å±•ç¤ºåŒºå†…éƒ¨æ’åºï¼Œä¼šå½±å“ç®€ç•¥å›¾çš„æ¸²æŸ“é¡ºåºï¼Œæ‰€ä»¥é€‰æ‹© Propsï¼ˆç”±å±•ç¤ºåŒºä¼ é€’ï¼‰
6. ç®€ç•¥å›¾ï¼Œæœ¬èº«ä¸ä¼šä¿å­˜çŠ¶æ€ï¼Œåªæ˜¯å±•ç¤ºï¼Œé€‰æ‹© props
7. åˆ†é¡µï¼Œåˆ†é¡µç­–ç•¥ä¼šå½±å“ç®€ç•¥å›¾çš„æ¸²æŸ“æ•°é‡ï¼Œæ‰€ä»¥é€‰æ‹© props

Pageï¼šå•†å“åˆ—è¡¨ï¼Œç”±äºåªåœ¨æœ¬èº«å±•ç¤ºï¼Œæ‰€ä»¥è¿™ä¸ªå¯ä»¥æ˜¯ state
ç­›é€‰åŒºç»„ä»¶ï¼šé€šè¿‡ props æ”¹å˜å•†å“åˆ—è¡¨ï¼ˆç”± Page ä¼ å…¥ç­›é€‰æ¡ä»¶å’Œç­›é€‰çš„å›è°ƒå‡½æ•°ï¼ˆä¸èƒ½ç›´æ¥ä¼ å…¥å•†å“çš„ setStateï¼‰ï¼‰
å±•ç¤ºåŒºç»„ä»¶ï¼šé€šè¿‡ props ä¼ å…¥å•†å“åˆ—è¡¨ï¼Œæ’åºä¸éœ€è¦ç”± page ä¼ å…¥ï¼Œå› ä¸ºæ’åºåªä¼šå½±å“åˆ°å±•ç¤ºåŒºç»„ä»¶ï¼Œæ‰€ä»¥å†…éƒ¨å†™æ’åºå’Œåˆ†é¡µçš„é…ç½®ï¼Œåˆ†é¡µæ•°é‡åº”è¯¥ç”± state ç»´æŠ¤
æ’åºç»„ä»¶ï¼šç”±å±•ç¤ºåŒºä¼ å…¥ propsï¼ˆæ’åºå›è°ƒï¼‰
åˆ†é¡µç»„ä»¶ï¼šç”±å±•ç¤ºåŒºä¼ å…¥é…ç½®ï¼Œä¸»è¦æ˜¯å½“å‰å•†å“åˆ—è¡¨æ•°é‡
ç¼©ç•¥å›¾ç»„ä»¶ï¼šæ ¹æ®åˆ†é¡µæ¥æ‰¹æ¬¡æ¸²æŸ“ï¼ŒåŒæ—¶ç”±å•†å“åˆ—è¡¨å†³å®šæ¸²æŸ“å†…å®¹

**AI è¯„ä»·** ï¼š å°†æ‰€æœ‰ä¼šå½±å“å…¶ä»–ç»„ä»¶çš„çŠ¶æ€ç»Ÿä¸€æ”¾ç½®åœ¨çˆ¶ç»„ä»¶ä¸­ï¼Œä¹Ÿå°±æ˜¯
Pageï¼šå•†å“ã€è¿‡æ»¤ã€åˆ†ç±»ã€åˆ†é¡µç­‰
çˆ¶ç»„ä»¶è´Ÿè´£ä¸šåŠ¡é€»è¾‘ï¼Œå­ç»„ä»¶è´Ÿè´£ UI æ¸²æŸ“

ä¸Šé¢å¥½åƒå¿˜è®°äº†æœç´¢æ ï¼Œä¹Ÿå°±æ˜¯å¯¼èˆªæ ï¼Œè¿™ä¸ªä¹Ÿè¯¥æ”¾åœ¨ Layout ä¸­è¿›è¡Œå¤„ç†

## è¯¦æƒ…é¡µä¸šåŠ¡é€»è¾‘åˆ†æ

1. é¦–å…ˆå›çœ‹å¯¼èˆªæ ï¼Œæ”¾åœ¨ Layout é‡Œé¢ï¼Œè´Ÿè´£ URL è·³è½¬ç­‰æ“ä½œï¼ˆæœç´¢è¯·æ±‚å›è°ƒå¤„ç†ï¼Œæœ‰ä¸ªé—®é¢˜ï¼Œé‚£ä¹ˆè¿™ä¸ªåˆ—è¡¨æ˜¯ä¸æ˜¯æ”¾åœ¨ Zustand é‡Œé¢å¯èƒ½æ›´å¥½ï¼‰
2. å¯¹äº Pageï¼Œé‡Œé¢åº”è¯¥æœ‰ç‰©å“çš„è¯¦ç»†çŠ¶æ€ï¼Œä½¿ç”¨ State å³å¯
3. è½®æ’­å›¾å’Œç¼©ç•¥å›¾ä¸€æ ·ï¼Œéƒ½åº”è¯¥ä¼ å…¥ props
4. ç›¸ä¼¼å•†å“æ¨èï¼Œä¹Ÿæ˜¯å±•ç¤ºï¼Œåº”è¯¥åŒæ—¶ä¼ å…¥è·³è½¬å›è°ƒ
5. ä¿¡æ¯ä¸è§„æ ¼ç­›é€‰ï¼Œè¿™é‡Œçš„ä¿¡æ¯åº”è¯¥æ˜¯è·Ÿéšå•†å“ä¸€èµ·ä¼ è¿›æ¥çš„ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé‡Œé¢æœ‰åŠ å…¥è´­ç‰©è½¦çš„è¡Œä¸ºï¼Œç‚¹å‡»åï¼Œåº”è¯¥ä½¿ç”¨ zustand æ”¹å˜å…¨å±€çŠ¶æ€ï¼Œè¿™ä¸ªä¸è´­ç‰©è½¦ç›¸å…³çš„äº†ã€‚

Pageï¼šå•†å“çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŠ å…¥è´­ç‰©è½¦çš„å›è°ƒï¼Œé“¾æ¥è·³è½¬å›è°ƒï¼Ÿï¼ˆæŠŠè·³è½¬ä½œä¸ºæ¨èç‰©å“æœ¬èº«çš„å±æ€§è¿˜æ˜¯ä¼ å…¥çš„ propsï¼Ÿï¼‰
ä¸»å›¾è½®æ’­åŒºï¼špropsï¼Œç”± Page ä¼ å…¥
ä¿¡æ¯ä¸è§„æ ¼é€‰æ‹©åŒºï¼šä¿¡æ¯ï¼Œç”± Page ä¼ å…¥ï¼Œä¸è¿‡ï¼Œå¯¹äºåƒé€‰ä¸­å°ºç å’Œé¢œè‰²ï¼Œè¿™äº›åº”è¯¥å­˜åœ¨ Page çš„ state é‡Œé¢å§ï¼Œè€Œåƒè´­ä¹°æ•°é‡ï¼Œä¹Ÿæ”¾åœ¨ Pageï¼Œä»¥åŠè§¦å‘çš„å›è°ƒï¼Œä¹Ÿåº”è¯¥åœ¨ Page é‡Œ

**AI è¯„ä»·**ï¼šè®¾è®¡æ˜¯å¯¹çš„ï¼ŒPage éƒ¨åˆ†å°¤å…¶æ˜¯ã€‚

## å¯¼èˆªæ ä¸šåŠ¡é€»è¾‘åˆ†æ

è¿™éƒ¨åˆ†çœ‹ç€ç®€å•å…¶å®å¹¶éï¼Œç‰¹åˆ«æ˜¯æœç´¢éƒ¨åˆ†ï¼Œéœ€è¦æ˜ç¡®è¿™éƒ¨åˆ†çš„æœç´¢é€»è¾‘

1. ç”¨æˆ·è¾“å…¥å…³é”®è¯ï¼Œå¯¼èˆªæ æœç´¢æ¡†æ”¹å˜ state
2. ç‚¹å‡»æœç´¢ï¼Œå¯¼èˆªæ å¤„ç†
3. è·¯ç”±è·³è½¬ï¼Œè·³è½¬åˆ°æœç´¢ URL
4. æ‰§è¡Œæœç´¢ APIï¼Œæ˜¾ç¤ºæœç´¢ç»“æœ
5. æ›´æ–°é¡µé¢çŠ¶æ€ï¼Œæœç´¢ç»“æœå’ŒåŠ è½½çŠ¶æ€
6. åŒæ­¥ URLï¼Œæ›´æ–°æµè§ˆå™¨åœ°å€æ 

ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å°†åˆ—è¡¨é¡µä½œä¸ºåŠ¨æ€è·¯ç”±é¡µé¢ï¼Œæ¥å— URL é‡Œé¢çš„å‚æ•°ï¼Œæ ¹æ®å‚æ•°å‘åç«¯å‘èµ·è¯·æ±‚ï¼Œç„¶åå°†ç»“æœä¿å­˜åœ¨ Page çŠ¶æ€é‡Œé¢ï¼Œåˆ†å‘ç»™å„ä¸ªå­ç»„ä»¶è¿›è¡Œæ¸²æŸ“ã€‚
éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬çš„ç­›é€‰ï¼Œå®é™…ä¸Šä¹Ÿåº”è¯¥æ˜¯ä¸€ä¸ªè·¯ç”±è·³è½¬ï¼Œä¹Ÿåº”è¯¥æ˜¯ä¸€ä¸ªå‘é€ç»™åç«¯çš„è¯·æ±‚å‚æ•°ï¼Œä¿å­˜åœ¨ URL é‡Œé¢ã€‚

## ç»„ä»¶è®¾è®¡

æˆ‘åªæ˜¯æŠŠæˆ‘çš„ä¸Šé¢çš„åˆ†æç®€å•å†™äº†ä¸ªç»“æ„å‘ç»™ ai å«ä»–è¡¥å……åï¼Œä»–å°±ç”Ÿæˆäº†ä¸‹é¢çš„ä¸€å¤§å †ã€‚ã€‚ã€‚
æˆ‘è§‰å¾—ä¸èµ–ï¼Œåªæ˜¯æœ‰äº›åŠŸèƒ½å±äºæš‚æ—¶ä¸éœ€è¦çš„ï¼Œå¯ä»¥åé¢åŠ ä¸Šå».
é¡ºä¾¿è¿˜å»æ·˜å®è°ƒç ”äº†ä¸€æ³¢ï¼Œçœ‹çœ‹ä»–ä»¬çš„ urlParams æ˜¯æ€ä¹ˆæ ·çš„å“ˆå“ˆ

```
// å®Œå–„åçš„ ProductListPage è®¾è®¡
ProductListPage: {
  // ğŸ¯ URL å‚æ•°ï¼ˆé©±åŠ¨é¡µé¢çŠ¶æ€ï¼‰
  urlParams: {
    query: "",        // æœç´¢å…³é”®è¯
    category: "",     // å•†å“åˆ†ç±»
    minPrice: "",     // æœ€ä½ä»·æ ¼
    maxPrice: "",     // æœ€é«˜ä»·æ ¼
    sort: "default",  // æ’åºæ–¹å¼
    page: "1",        // å½“å‰é¡µç 
    pageSize: "12"    // æ¯é¡µæ•°é‡
  },

  // ğŸ¯ é¡µé¢çŠ¶æ€
  state: {
    products: [],           // å•†å“åˆ—è¡¨æ•°æ®
    totalCount: 0,          // å•†å“æ€»æ•°ï¼ˆç”¨äºåˆ†é¡µï¼‰
    isLoading: false,       // åŠ è½½çŠ¶æ€
    error: null,            // é”™è¯¯ä¿¡æ¯
    (å¯é€‰)hasMore: true           // æ˜¯å¦æœ‰æ›´å¤šæ•°æ®ï¼ˆç”¨äºæ— é™æ»šåŠ¨ï¼‰
  },

  // ğŸ¯ é¡µé¢æ–¹æ³•
  methods: {
    fetchProducts(),        // è·å–å•†å“æ•°æ®
    handleFilterChange(),   // å¤„ç†ç­›é€‰å˜åŒ–
    handleSortChange(),     // å¤„ç†æ’åºå˜åŒ–
    handlePageChange(),     // å¤„ç†åˆ†é¡µå˜åŒ–
    handleSearch()          // å¤„ç†æœç´¢
  },

  // ğŸ¯ å­ç»„ä»¶ç»“æ„
  children: {

    // 2. ç­›é€‰åŒºåŸŸ
    FilterSection: {
      props: {
        // å½“å‰ç­›é€‰æ¡ä»¶
        activeFilters: {
          category: urlParams.category,
          priceRange: {
            min: urlParams.minPrice,
            max: urlParams.maxPrice
          }
        },
        // å¯ç”¨ç­›é€‰é€‰é¡¹
        filterOptions: {
          categories: [],    // ä»APIè·å–çš„åˆ†ç±»åˆ—è¡¨
          priceRanges: [     // é¢„å®šä¹‰çš„ä»·æ ¼åŒºé—´
            { label: "0-100å…ƒ", min: 0, max: 100 },
            { label: "100-500å…ƒ", min: 100, max: 500 }
          ]
        },
        // å›è°ƒå‡½æ•°
        onFilterChange: methods.handleFilterChange,
        onFilterReset: () => methods.handleFilterChange({}) // é‡ç½®ç­›é€‰
      },
      children: {
        CategoryFilter: {
          props: {
            categories: filterOptions.categories,
            selectedCategory: activeFilters.category,
            onCategoryChange: (category) => onFilterChange({ category })
          }
        },
        PriceFilter: {
          props: {
            priceRanges: filterOptions.priceRanges,
            selectedRange: activeFilters.priceRange,
            onPriceChange: (range) => onFilterChange({
              minPrice: range.min,
              maxPrice: range.max
            })
          }
        }
      }
    },

    // 3. ä¸»è¦å†…å®¹åŒºåŸŸ
    MainContent: {
      props: {
        layout: "grid", // å¸ƒå±€æ–¹å¼ï¼šgrid | list
        isLoading: state.isLoading,
        isEmpty: state.products.length === 0
      },
      children: {
        // 3.1 å·¥å…·æ ï¼ˆæ’åº + å¸ƒå±€åˆ‡æ¢ + æœç´¢ï¼‰
        Toolbar: {
          props: {
            currentSort: urlParams.sort,
            currentLayout: "grid",
            searchQuery: urlParams.query,
            productCount: state.totalCount,
            onSortChange: methods.handleSortChange,
            onLayoutChange: (layout) => {/* æ›´æ–°å¸ƒå±€çŠ¶æ€ */},
            onSearch: methods.handleSearch
          },
          children: {
            SortDropdown: {
              props: {
                options: [
                  { value: "default", label: "é»˜è®¤æ’åº" },
                  { value: "price_asc", label: "ä»·æ ¼ä»ä½åˆ°é«˜" },
                  { value: "price_desc", label: "ä»·æ ¼ä»é«˜åˆ°ä½" },
                  { value: "newest", label: "æœ€æ–°ä¸Šæ¶" },
                  { value: "popular", label: "é”€é‡æœ€é«˜" }
                ],
                value: currentSort,
                onChange: onSortChange
              }
            },
            LayoutToggle: {
              props: {
                currentLayout: currentLayout,
                onLayoutChange: onLayoutChange
              }
            },
            SearchBox: {
              props: {
                placeholder: "åœ¨ç»“æœä¸­æœç´¢...",
                value: searchQuery,
                onSearch: onSearch
              }
            },
            ResultsCount: {
              props: {
                count: productCount,
                query: searchQuery
              }
            }
          }
        },

        // 3.2 å•†å“å±•ç¤ºåŒºåŸŸ
        DisplaySection: {
          props: {
            products: state.products,
            layout: currentLayout,
            isLoading: state.isLoading
          },
          children: {
            // 3.2.1 åŠ è½½çŠ¶æ€
            LoadingState: {
              condition: state.isLoading,
              props: {
                skeletonCount: 12
              }
            },

            // 3.2.2 ç©ºçŠ¶æ€
            EmptyState: {
              condition: state.products.length === 0 && !state.isLoading,
              props: {
                title: urlParams.query ? `æ²¡æœ‰æ‰¾åˆ°"${urlParams.query}"ç›¸å…³å•†å“` : "æš‚æ— å•†å“",
                description: "å°è¯•è°ƒæ•´ç­›é€‰æ¡ä»¶æˆ–æœç´¢å…¶ä»–å…³é”®è¯",
                actionLabel: "æµè§ˆæ‰€æœ‰å•†å“",
                onAction: () => methods.handleFilterChange({}) // é‡ç½®æ‰€æœ‰ç­›é€‰
              }
            },

            // 3.2.3 é”™è¯¯çŠ¶æ€
            ErrorState: {
              condition: state.error !== null,
              props: {
                error: state.error,
                onRetry: methods.fetchProducts
              }
            },

            // 3.2.4 å•†å“ç½‘æ ¼
            ProductGrid: {
              condition: state.products.length > 0,
              props: {
                products: state.products,
                layout: currentLayout,
                onProductClick: (productId) => {/* è·³è½¬åˆ°å•†å“è¯¦æƒ… */},
                ï¼ˆå¯é€‰ï¼‰onAddToCart: (product) => {/* æ·»åŠ åˆ°è´­ç‰©è½¦ */}
              },
              children: {
                ProductCard: {
                  props: {
                    product: {}, // å•ä¸ªå•†å“æ•°æ®
                    layout: currentLayout,
                    (å¯é€‰)onQuickView: (product) => {/* å¿«é€Ÿé¢„è§ˆ */},
                    ï¼ˆå¯é€‰ï¼‰onAddToCart: (product) => {/* æ·»åŠ åˆ°è´­ç‰©è½¦ */},
                  }
                }
              }
            },

            // 3.2.5 åˆ†é¡µç»„ä»¶
            Pagination: {
              condition: state.products.length > 0,
              props: {
                currentPage: parseInt(urlParams.page),
                totalPages: Math.ceil(state.totalCount / parseInt(urlParams.pageSize)),
                pageSize: parseInt(urlParams.pageSize),
                onPageChange: methods.handlePageChange,
                onPageSizeChange: (newSize) => methods.handleFilterChange({
                  pageSize: newSize,
                  page: "1"
                })
              }
            },

            // 3.2.6 æ— é™æ»šåŠ¨ï¼ˆå¤‡é€‰æ–¹æ¡ˆï¼‰
            InfiniteScroll: {
              condition: false, // å¯ä»¥æ ¹æ®éœ€æ±‚å¯ç”¨
              props: {
                hasMore: state.hasMore,
                onLoadMore: () => methods.handlePageChange(parseInt(urlParams.page) + 1)
              }
            }
          }
        }
      }
    },

    // 4. ä¾§è¾¹æ ï¼ˆå¯é€‰ï¼‰
    Sidebar: {
      props: {
        isSticky: true,
        content: {
          recentlyViewed: [],    // æœ€è¿‘æµè§ˆ
          popularProducts: [],   // çƒ­é—¨å•†å“
          promotions: []         // ä¿ƒé”€ä¿¡æ¯
        }
      }
    }
  }
}
```

å…ˆå¤åˆ¶è¿‡æ¥å…å¾—ç¿»æ¥ç¿»å»

è¯¦æƒ…é¡µä¸šåŠ¡é€»è¾‘åˆ†æ

1. é¦–å…ˆå›çœ‹å¯¼èˆªæ ï¼Œæ”¾åœ¨ Layout é‡Œé¢ï¼Œè´Ÿè´£ URL è·³è½¬ç­‰æ“ä½œï¼ˆæœç´¢è¯·æ±‚å›è°ƒå¤„ç†ï¼Œæœ‰ä¸ªé—®é¢˜ï¼Œé‚£ä¹ˆè¿™ä¸ªåˆ—è¡¨æ˜¯ä¸æ˜¯æ”¾åœ¨ Zustand é‡Œé¢å¯èƒ½æ›´å¥½ï¼‰
2. å¯¹äº Pageï¼Œé‡Œé¢åº”è¯¥æœ‰ç‰©å“çš„è¯¦ç»†çŠ¶æ€ï¼Œä½¿ç”¨ State å³å¯
3. è½®æ’­å›¾å’Œç¼©ç•¥å›¾ä¸€æ ·ï¼Œéƒ½åº”è¯¥ä¼ å…¥ props
4. ç›¸ä¼¼å•†å“æ¨èï¼Œä¹Ÿæ˜¯å±•ç¤ºï¼Œåº”è¯¥åŒæ—¶ä¼ å…¥è·³è½¬å›è°ƒ
5. ä¿¡æ¯ä¸è§„æ ¼ç­›é€‰ï¼Œè¿™é‡Œçš„ä¿¡æ¯åº”è¯¥æ˜¯è·Ÿéšå•†å“ä¸€èµ·ä¼ è¿›æ¥çš„ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé‡Œé¢æœ‰åŠ å…¥è´­ç‰©è½¦çš„è¡Œä¸ºï¼Œç‚¹å‡»åï¼Œåº”è¯¥ä½¿ç”¨ zustand æ”¹å˜å…¨å±€çŠ¶æ€ï¼Œè¿™ä¸ªä¸è´­ç‰©è½¦ç›¸å…³çš„äº†ã€‚

Pageï¼šå•†å“çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŠ å…¥è´­ç‰©è½¦çš„å›è°ƒï¼Œé“¾æ¥è·³è½¬å›è°ƒï¼Ÿï¼ˆæŠŠè·³è½¬ä½œä¸ºæ¨èç‰©å“æœ¬èº«çš„å±æ€§è¿˜æ˜¯ä¼ å…¥çš„ propsï¼Ÿï¼‰
ä¸»å›¾è½®æ’­åŒºï¼špropsï¼Œç”± Page ä¼ å…¥
ä¿¡æ¯ä¸è§„æ ¼é€‰æ‹©åŒºï¼šä¿¡æ¯ï¼Œç”± Page ä¼ å…¥ï¼Œä¸è¿‡ï¼Œå¯¹äºåƒé€‰ä¸­å°ºç å’Œé¢œè‰²ï¼Œè¿™äº›åº”è¯¥å­˜åœ¨ Page çš„ state é‡Œé¢å§ï¼Œè€Œåƒè´­ä¹°æ•°é‡ï¼Œä¹Ÿæ”¾åœ¨ Pageï¼Œä»¥åŠè§¦å‘çš„å›è°ƒï¼Œä¹Ÿåº”è¯¥åœ¨ Page é‡Œ

æ ¹æ®æˆ‘å¯¹æ·˜å®çš„è§‚å¯Ÿï¼Œå®é™…ä¸Šï¼ŒåŒä¸€ä»¶å•†å“ï¼Œå…¶å®åœ¨ä¿®æ”¹è§„æ ¼ç­‰å±æ€§çš„æ—¶å€™ï¼Œurl ä¹Ÿåœ¨å‘ç”Ÿå˜åŒ–ã€‚
ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æˆ‘ä»¬ä¿®æ”¹è§„æ ¼æ—¶ï¼Œå…¶å®ä¹Ÿåœ¨è·³è½¬è·¯ç”±ï¼Œä¿¡æ¯ä¹Ÿåœ¨å˜åŒ–ï¼Œä¸è¿‡æ˜¯é€‰æ‹©æ€§çš„å˜åŒ–ï¼Œé€‰æ‹©æ€§çš„æ›´æ–° state

```
// å±•ç¤ºé¡µç»„ä»¶
ProductPage:{
    urlParams:{
        productId,      // å½“å‰çš„è¯¦ç»†é¡µçš„ç‰©å“id
        skuid,          // å°†ä¸åŒè§„æ ¼çš„å•†å“æ˜ å°„ä¸ºä¸åŒçš„skuï¼Œæ›´æ”¹ä»·æ ¼åº“å­˜ç­‰å†…å®¹
    },
    state:{
        productInfo,
        showingImageï¼Œ
        // isLoop,      // æœ¬æ¥æ‰“ç®—åŠ ä¸Šå¾ªç¯è½®æ’­çš„ï¼Œä½†æ˜¯å®é™…çœ‹åˆ°çš„æ·˜å®è¯¦ç»†é¡µé‡Œé¢å¹¶æ²¡æœ‰ï¼Œä»”ç»†æƒ³æƒ³ä¹Ÿæ˜¯
        count,          // ç”¨äºè®°å½•æ·»åŠ åˆ°è´­ç‰©è½¦é‡Œçš„æ•°é‡
        variant,        // ä¸åŒçš„è§„æ ¼
        stock,
        price,
    },
    method:{
        addCart,        // å°†ç‰©å“åŠ å…¥è´­ç‰©è½¦
        fetchProduct,   // è·å–ç‰©å“ï¼Œå‚æ•°å°±æ˜¯ä¸Šé¢é‚£ä¸ªurlParams
    }ï¼Œchildren:{
        imageSection:{
            condition:productInfo.images.length > 0
            props:productInfo
            children:{
                showingImageSection:{
                    props:showingImage
                },
                imagesList:{
                    props:productInfo.images
                }
            }
        },
        InfoPanel:{
            props:productInfo,variant,price,count,stock,addCart
        }
    }
}
```

## æ•°æ®ç»“æ„è®¾è®¡

å•†å“

```typescript
// åˆ—è¡¨é¡µå±•ç¤ºç”¨çš„ç®€ç•¥ä¿¡æ¯
interface ProductSimple {
  id: string; // å•†å“ID (SPU ID)
  name: string; // å•†å“åç§°
  price: number; // æ˜¾ç¤ºä»·æ ¼ï¼ˆå¯èƒ½æ˜¯æœ€ä½ä»·ï¼‰
  sales: number; // é”€é‡
  image: string; // å°é¢å›¾ URL (e.g., "https://cdn.example.com/t-shirt.jpg")
  tags: string[]; // æ ‡ç­¾ (e.g., ["çƒ­é”€", "æ–°å“"])
}

// å…·ä½“è§„æ ¼å•†å“ (SKU)
interface ProductSku {
  id: string; // SKU ID (å”¯ä¸€æ ‡è¯†ï¼Œå¦‚ "sku_123")
  productId: string; // å…³è”çš„ SPU ID
  name: string; // SKU åç§° (e.g., "çº¢è‰² Tæ¤ Sç ")
  price: number; // è¯¥è§„æ ¼çš„ä»·æ ¼
  stock: number; // åº“å­˜
  image: string; // è¯¥è§„æ ¼å¯¹åº”çš„å›¾ç‰‡ URL
  attributes: {
    // è¯¥ SKU é€‰ä¸­çš„å±æ€§ç»„åˆ
    [key: string]: string; // e.g., { color: "red", size: "s" }
  };
}

// å•†å“è¯¦æƒ…é¡µå®Œæ•´ä¿¡æ¯ (SPU)
interface ProductDetail {
  id: string; // SPU ID
  name: string; // å•†å“åç§°
  description: string; // å•†å“æè¿°
  priceRange: {
    // ä»·æ ¼åŒºé—´
    min: number;
    max: number;
  };
  sales: number; // æ€»é”€é‡
  images: string[]; // ä¸»å›¾è½®æ’­åˆ—è¡¨ URLs

  // åŠ¨æ€å±æ€§å®šä¹‰ (ç”¨äºæ¸²æŸ“é€‰æ‹©å™¨)
  attributes: {
    name: string; // å±æ€§å (e.g., "é¢œè‰²")
    key: string; // å±æ€§é”® (e.g., "color")
    values: {
      value: string; // å±æ€§å€¼ (e.g., "red")
      label: string; // æ˜¾ç¤ºæ–‡æœ¬ (e.g., "çº¢è‰²")
      image?: string; // å¯é€‰ï¼šå±æ€§å¯¹åº”çš„ç¼©ç•¥å›¾
    }[];
  }[];

  // æ‰€æœ‰å¯ç”¨çš„ SKU åˆ—è¡¨ (ç”¨äºå‰ç«¯åˆ¤æ–­åº“å­˜å’Œä»·æ ¼)
  skus: ProductSku[];

  // æ¨èå•†å“
  recommendations: ProductSimple[];
}
```

è¿‡æ»¤å™¨

```typescript
interface ProductFilter {
  query?: string; // æœç´¢å…³é”®è¯
  category?: string; // å•†å“åˆ†ç±» ID
  minPrice?: number; // æœ€ä½ä»·æ ¼
  maxPrice?: number; // æœ€é«˜ä»·æ ¼
  tags?: string[]; // æ ‡ç­¾ç­›é€‰
  sort?: "default" | "price_asc" | "price_desc" | "sales" | "newest"; // æ’åºæ–¹å¼
  page: number; // å½“å‰é¡µç 
  pageSize: number; // æ¯é¡µæ•°é‡
}
```

è´­ç‰©è½¦

```typescript
interface CartItem {
  skuId: string; // è´­ç‰©è½¦å­˜çš„æ˜¯ SKU ID
  quantity: number; // è´­ä¹°æ•°é‡
  addedAt: number; // æ·»åŠ æ—¶é—´ (ç”¨äºæ’åº)
  // å‰ç«¯å±•ç¤ºæ—¶ï¼Œé€šå¸¸éœ€è¦æ ¹æ® skuId å» fetch å®æ—¶ä¿¡æ¯ï¼Œæˆ–è€…åç«¯ç›´æ¥è¿”å›èšåˆåçš„ä¿¡æ¯
  // ä¸‹é¢æ˜¯åç«¯èšåˆè¿”å›æ—¶å¯èƒ½åŒ…å«çš„å­—æ®µï¼š
  product?: {
    name: string;
    image: string;
    price: number;
    attributes: { [key: string]: string };
  };
}

interface Cart {
  items: CartItem[];
  totalPrice: number;
  totalQuantity: number;
}
```

## API æ¥å£è®¾è®¡

```typescript
// 1. æŸ¥è¯¢å•†å“åˆ—è¡¨
// GET /api/v1/products?page=1&pageSize=12&category=clothes&sort=price_asc
interface GetProductsResponse {
  items: ProductSimple[];
  total: number;
  page: number;
  pageSize: number;
  hasMore: boolean;
}

// 2. æŸ¥è¯¢å•†å“è¯¦æƒ…
// GET /api/v1/products/:id
// è¿”å› ProductDetail

// 3. è´­ç‰©è½¦ç›¸å…³
// GET /api/v1/cart
// è¿”å› Cart

// POST /api/v1/cart
// Body: { skuId: string, quantity: number }

// PATCH /api/v1/cart/:skuId
// Body: { quantity: number }

// DELETE /api/v1/cart/:skuId
```
